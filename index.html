                <!-- Orejas -->
                <circle cx="60" cy="60" r="15" fill="#8B4513"/>
                <circle cx="140" cy="60" r="15" fill="#8B4513"/>
                <circle cx="60" cy="60" r="10" fill="#DEB887"/>
                <circle cx="140" cy="60" r="10" fill="#DEB887"/>

                <!-- Grupo de ojos -->
                <g id="eyes">
                    <!-- Blancos de los ojos -->
                    <circle cx="85" cy="75" r="8" fill="white"/>
                    <circle cx="115" cy="75" r="8" fill="white"/>
                    <!-- Pupilas -->
                    <g id="pupils">
                        <circle cx="85" cy="75" r="4" fill="black"/>
                        <circle cx="115" cy="75" r="4" fill="black"/>
                    </g>
                </g>

                <!-- Nariz -->
                <ellipse cx="100" cy="90" rx="8" ry="6" fill="#4A2500"/>

                <!-- Boca -->
                <path d="M90 100 Q100 105 110 100" stroke="#4A2500" stroke-width="2" fill="none"/>

                <!-- Brazos normales -->
                <g id="arms-rest">
                    <path d="M65 115 Q60 130 70 150" stroke="#8B4513" stroke-width="12" fill="none"/>
                    <path d="M135 115 Q140 130 130 150" stroke="#8B4513" stroke-width="12" fill="none"/>
                </g>

                <!-- Manos tapando ojos (inicialmente ocultas) -->
                <g id="hands" opacity="0">
                    <path d="M65 115 Q85 95 85 75" stroke="#8B4513" stroke-width="12" fill="none"/>
                    <path d="M135 115 Q115 95 115 75" stroke="#8B4513" stroke-width="12" fill="none"/>
                    <circle cx="85" cy="75" r="10" fill="#DEB887"/>
                    <circle cx="115" cy="75" r="10" fill="#DEB887"/>
                </g>
            </svg>
        </div>
        <form id="loginForm">
            <div class="form-group">
                <label for="username">Usuario</label>
                <i class="fas fa-user"></i>
                <input type="text" id="username" placeholder="Ingrese su usuario" required>
            </div>
            <!-- The key change is in the HTML for the password input group -->
            <div class="form-group">
                <label for="password">Contraseña</label>
                <i class="fas fa-lock"></i>
                <input type="password" id="password" placeholder="Ingrese su contraseña" required>
                <span class="password-toggle" onclick="togglePasswordVisibility()">
                        <i class="fas fa-eye-slash" id="passwordToggleIcon"></i>
                    </span>
            </div>
            <div class="remember-me">
                <input type="checkbox" id="rememberMe">
                <label for="rememberMe">Mantener sesión iniciada</label>
            </div>
            <button type="submit" class="submit-btn">Iniciar Sesión</button>
        </form>
        <div id="message"></div>
    </div>
</div>
<div class="copyright">
    © 2024 Desarrollado por Alex Rendon - Merchandising Express. Todos los derechos reservados.
</div>




<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBC5M5R5XMx-OU_8Ra_6yaVJO1DKDLu9aY",
        authDomain: "app-sofia-4ceeb.firebaseapp.com",
        databaseURL: "https://app-sofia-4ceeb-default-rtdb.firebaseio.com",
        projectId: "app-sofia-4ceeb",
        storageBucket: "app-sofia-4ceeb.appspot.com",
        messagingSenderId: "600003650471",
        appId: "1:600003650471:web:8bc2ea2892c04119080c82",
        measurementId: "G-NH08X2MFD9"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function showMessage(text, show = true) {
        const messageElement = document.getElementById('message');
        messageElement.textContent = text;
        messageElement.style.display = show ? 'block' : 'none';
    }

    document.getElementById('loginForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        const rememberMe = document.getElementById('rememberMe').checked;

        try {
            const credentialsRef = db.ref('user_credentials');
            const snapshot = await credentialsRef.once('value');
            let found = false;

            snapshot.forEach((clientSnapshot) => {
                const clientCredentials = clientSnapshot.val();
                if (clientCredentials.username === username && clientCredentials.password === password) {
                    found = true;
                    if (rememberMe) {
                        localStorage.setItem('username', username);
                    } else {
                        localStorage.removeItem('username');
                    }
                    window.location.href = `viewClient.html?username=${username}`;
                    return true;
                }
            });

            if (!found) {
                showMessage('Usuario o contraseña incorrectos');
            }
        } catch (error) {
            console.error('Error de autenticación:', error);
            showMessage('Error al intentar iniciar sesión. Por favor, intente nuevamente.');
        }
    });

    window.addEventListener('load', () => {
        const savedUsername = localStorage.getItem('username');
        if (savedUsername) {
            document.getElementById('username').value = savedUsername;
            document.getElementById('rememberMe').checked = true;
        }
    });

    document.querySelectorAll('input').forEach(input => {
        input.addEventListener('input', () => showMessage('', false));
    });

    function togglePasswordVisibility() {
        const passwordInput = document.getElementById('password');
        const passwordToggleIcon = document.getElementById('passwordToggleIcon');

        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            passwordToggleIcon.classList.remove('fa-eye-slash');
            passwordToggleIcon.classList.add('fa-eye');
        } else {
            passwordInput.type = 'text';
            passwordInput.type = 'password';
            passwordToggleIcon.classList.remove('fa-eye');
            passwordToggleIcon.classList.add('fa-eye-slash');
        }
    }

    // Esperar a que el DOM esté completamente cargado
    document.addEventListener('DOMContentLoaded', function() {
        const eyes = document.getElementById('eyes');
        const hands = document.getElementById('hands');
        const armsRest = document.getElementById('arms-rest');
        const pupils = document.getElementById('pupils');

        // Función para manejar las animaciones del mono
        function updateMonkey(input) {
            if (input.id === 'username') {
                // Animación para el campo de usuario
                pupils.style.animation = 'lookAround 2s infinite';
                hands.setAttribute('opacity', '0');
                armsRest.setAttribute('opacity', '1');
                eyes.style.animation = 'blink 4s infinite';
            } else if (input.id === 'password') {
                // Animación para el campo de contraseña
                pupils.style.animation = 'none';
                eyes.style.animation = 'none';

                if (input.type === 'password') {
                    // Tapar ojos
                    hands.setAttribute('opacity', '1');
                    armsRest.setAttribute('opacity', '0');
                } else {
                    // Destapar ojos
                    hands.setAttribute('opacity', '0');
                    armsRest.setAttribute('opacity', '1');
                    eyes.style.animation = 'blink 4s infinite';
                }
            }
        }

        // Event listeners para los campos
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');

        usernameInput.addEventListener('focus', () => updateMonkey(usernameInput));
        passwordInput.addEventListener('focus', () => updateMonkey(passwordInput));

        // Modificar la función togglePasswordVisibility
        window.togglePasswordVisibility = function() {
            const passwordInput = document.getElementById('password');
            const passwordToggleIcon = document.getElementById('passwordToggleIcon');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordToggleIcon.classList.remove('fa-eye-slash');
                passwordToggleIcon.classList.add('fa-eye');
            } else {
                passwordInput.type = 'password';
                passwordToggleIcon.classList.remove('fa-eye');
                passwordToggleIcon.classList.add('fa-eye-slash');
            }

            updateMonkey(passwordInput);
        };

        // Resetear cuando se pierde el foco
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('blur', () => {
                pupils.style.animation = 'none';
                if (input.id === 'password' && input.type === 'password') {
                    hands.setAttribute('opacity', '1');
                    armsRest.setAttribute('opacity', '0');
                }
            });
        });
    });
</script>
</body>
</html>
